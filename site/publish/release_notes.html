
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2018-06-10
 Rendered using Reflow Maven Skin 1.1.0 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Release Notes | Apache Phoenix</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="//netdna.bootstrapcdn.com/bootswatch/2.3.2/flatly/bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="//yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-release_notes project-phoenix-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html"><div class="xtoplogo"></div></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Overview">Overview</a></li>
									<li ><a href="who_is_using.html" title="Who is Using">Who is Using</a></li>
									<li ><a href="recent.html" title="Recent Improvements">Recent Improvements</a></li>
									<li ><a href="roadmap.html" title="Roadmap">Roadmap</a></li>
									<li ><a href="news.html" title="News">News</a></li>
									<li ><a href="performance.html" title="Performance">Performance</a></li>
									<li ><a href="team.html" title="Team">Team</a></li>
									<li ><a href="resources.html" title="Presentations">Presentations</a></li>
									<li ><a href="mailing_list.html" title="Mailing Lists">Mailing Lists</a></li>
									<li ><a href="source.html" title="Source Repository">Source Repository</a></li>
									<li ><a href="issues.html" title="Issue Tracking">Issue Tracking</a></li>
									<li ><a href="download.html" title="Download">Download</a></li>
									<li ><a href="installation.html" title="Installation">Installation</a></li>
									<li class="divider"/>
									<li ><a href="contributing.html" title="How to Contribute">How to Contribute</a></li>
									<li ><a href="develop.html" title="How to Develop">How to Develop</a></li>
									<li ><a href="building_website.html" title="How to Update Website">How to Update Website</a></li>
									<li ><a href="release.html" title="How to Release">How to Release</a></li>
									<li class="divider"/>
									<li ><a href="http://www.apache.org/licenses/" title="License" class="externalLink">License</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Using <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="faq.html" title="F.A.Q.">F.A.Q.</a></li>
									<li ><a href="Phoenix-in-15-minutes-or-less.html" title="Quick Start">Quick Start</a></li>
									<li ><a href="building.html" title="Building">Building</a></li>
									<li ><a href="tuning_guide.html" title="Tuning">Tuning</a></li>
									<li ><a href="explainplan.html" title="Explain Plan">Explain Plan</a></li>
									<li ><a href="tuning.html" title="Configuration">Configuration</a></li>
									<li ><a href="upgrading.html" title="Backward Compatibility">Backward Compatibility</a></li>
									<li class="active"><a href="" title="Release Notes">Release Notes</a></li>
									<li ><a href="pherf.html" title="Performance Testing">Performance Testing</a></li>
									<li class="divider"/>
									<li ><a href="phoenix_spark.html" title="Apache Spark Integration">Apache Spark Integration</a></li>
									<li ><a href="hive_storage_handler.html" title="Phoenix Storage Handler for Apache Hive">Phoenix Storage Handler for Apache Hive</a></li>
									<li ><a href="pig_integration.html" title="Apache Pig Integration">Apache Pig Integration</a></li>
									<li ><a href="phoenix_mr.html" title="Map Reduce Integration">Map Reduce Integration</a></li>
									<li ><a href="flume.html" title="Apache Flume Plugin">Apache Flume Plugin</a></li>
									<li ><a href="kafka.html" title="Apache Kafka Plugin">Apache Kafka Plugin</a></li>
									<li ><a href="python.html" title="Python Driver">Python Driver</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Addons <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://docs.aws.amazon.com/ElasticMapReduce/latest/ReleaseGuide/emr-phoenix.html" title="Phoenix on Amazon EMR" class="externalLink">Phoenix on Amazon EMR</a></li>
									<li ><a href="http://python-phoenixdb.readthedocs.io/en/latest" title="Phoenix Adapter for Python" class="externalLink">Phoenix Adapter for Python</a></li>
									<li ><a href="phoenix_orm.html" title="Phoenix ORM Library">Phoenix ORM Library</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="transactions.html" title="Transactions">Transactions</a></li>
									<li ><a href="udf.html" title="User-defined Functions">User-defined Functions</a></li>
									<li class="divider"/>
									<li ><a href="secondary_indexing.html" title="Secondary Indexes">Secondary Indexes</a></li>
									<li ><a href="columnencoding.html" title="Storage Formats">Storage Formats</a></li>
									<li ><a href="atomic_upsert.html" title="Atomic Upsert">Atomic Upsert</a></li>
									<li ><a href="namspace_mapping.html" title="Namespace Mapping">Namespace Mapping</a></li>
									<li ><a href="update_statistics.html" title="Statistics Collection">Statistics Collection</a></li>
									<li ><a href="rowtimestamp.html" title="Row Timestamp Column">Row Timestamp Column</a></li>
									<li ><a href="paged.html" title="Paged Queries">Paged Queries</a></li>
									<li ><a href="salted.html" title="Salted Tables">Salted Tables</a></li>
									<li ><a href="skip_scan.html" title="Skip Scan">Skip Scan</a></li>
									<li ><a href="tablesample.html" title="Table Sampling">Table Sampling</a></li>
									<li class="divider"/>
									<li ><a href="views.html" title="Views">Views</a></li>
									<li ><a href="multi-tenancy.html" title="Multi tenancy">Multi tenancy</a></li>
									<li ><a href="dynamic_columns.html" title="Dynamic Columns">Dynamic Columns</a></li>
									<li class="divider"/>
									<li ><a href="bulk_dataload.html" title="Bulk Loading">Bulk Loading</a></li>
									<li ><a href="server.html" title="Query Server">Query Server</a></li>
									<li ><a href="metrics.html" title="Metrics">Metrics</a></li>
									<li ><a href="tracing.html" title="Tracing">Tracing</a></li>
									<li ><a href="cursors.html" title="Cursor">Cursor</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="language/index.html" title="Grammar">Grammar</a></li>
									<li ><a href="language/functions.html" title="Functions">Functions</a></li>
									<li ><a href="language/datatypes.html" title="Datatypes">Datatypes</a></li>
									<li ><a href="array_type.html" title="ARRAY type">ARRAY type</a></li>
									<li class="divider"/>
									<li ><a href="sequences.html" title="Sequences">Sequences</a></li>
									<li ><a href="joins.html" title="Joins">Joins</a></li>
									<li ><a href="subqueries.html" title="Subqueries">Subqueries</a></li>
									<li ><a href="explainplan.html" title="Explain Plan">Explain Plan</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->

	<header>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="page-header">
 <h1>Release Notes</h1>
</div> 
<p>Release notes provide details on issues and their fixes which may have an impact on prior Phoenix behavior. For some issues an upgrade may be required to be performed for a fix to take affect. See below for directions specific to a particular release.</p> 
<div class="section"> 
 <div class="section"> 
  <h3 id="Phoenix_5.0.0-alpha_Release_Notes"><u>Phoenix 5.0.0-alpha Release Notes</u></h3> 
  <p>Phoenix 5.0.0-alpha is a “preview” release. This release is the first version of Phoenix which is compatible with Apache Hadoop 3.0.x and Apache HBase 2.0.x. This release also is designated an “alpha” release because there are several known deficiencies which impact the production readiness. This release should be used carefully by users who have taken the time to understand what is known to be working and what is not.</p> 
  <p>Known issues:</p> 
  <ul> 
   <li>The Apache Hive integration is known to be non-functional (PHOENIX-4423)</li> 
   <li>Split/Merge logic with Phoenix local indexes are broken (PHOENIX-4440)</li> 
   <li>Apache Tepha integration/transactional tables are non-functional (PHOENIX-4580)</li> 
   <li>Point-in-time queries and tools that look at “old” cells are broken, e.g. IndexScrutiny (PHOENIX-4378)</li> 
  </ul> 
  <p>The developers would like to encourage users to test this release out and report any observed issues so that the official 5.0.0 release quality may be significantly improved.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Phoenix-4.8.0_Release_Notes"><u>Phoenix-4.8.0 Release Notes</u></h3> 
  <p><a class="externalLink" href="https://issues.apache.org/jira/browse/PHOENIX-3164">PHOENIX-3164</a> is a relatively serious bug that affects the <a class="externalLink" href="http://phoenix.apache.org/server.html">Phoenix Query Server</a> deployed with “security enabled” (Kerberos or Active Directory). Due to another late-game change in the 4.8.0 release as well as an issue with the use of Hadoop’s UserGroupInformation class, every “client session” to the Phoenix Query Server with security enabled will result in a new instance of the Phoenix JDBC driver <tt>PhoenixConnection</tt> (and other related classes). This ultimately results in a new connection to ZooKeeper for each “client session”.</p> 
  <p>Within a short amount of time of active use with the Phoenix Query Server creating a new ZooKeeper connection for each “client session”, the number of ZooKeeper connections will have grown rapidly likely triggering ZooKeeper’s built-in denial of service protection (<a class="externalLink" href="https://zookeeper.apache.org/doc/r3.4.8/zookeeperAdmin.html">maxClientCnxns</a>). This will cause all future connections to ZooKeeper by the host running the Phoenix Query Server to be dropped. This would prevent all HBase client API calls which need to access ZooKeeper from completing.</p> 
  <p>As part of <a class="externalLink" href="https://issues.apache.org/jira/browse/PHOENIX-1734">PHOENIX-1734</a> we have changed the local index implementation to store index data in the separate column families in the same data table. So while upgrading the phoenix at server we need to remove below local index related configurations from <tt>hbase-site.xml</tt> and run upgrade steps mentioned <a href="secondary_indexing.html#Upgrading_Local_Indexes_created_before_4.8.0">here</a></p> 
  <div class="source"> 
   <pre>&lt;property&gt;
  &lt;name&gt;hbase.master.loadbalancer.class&lt;/name&gt;
  &lt;value&gt;org.apache.phoenix.hbase.index.balancer.IndexLoadBalancer&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;hbase.coprocessor.master.classes&lt;/name&gt;
  &lt;value&gt;org.apache.phoenix.hbase.index.master.IndexMasterObserver&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;hbase.coprocessor.regionserver.classes&lt;/name&gt;
  &lt;value&gt;org.apache.hadoop.hbase.regionserver.LocalIndexMerger&lt;/value&gt;
&lt;/property&gt;
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Phoenix-4.5.0_Release_Notes"><u>Phoenix-4.5.0 Release Notes</u></h3> 
  <p>Both <a class="externalLink" href="https://issues.apache.org/jira/browse/PHOENIX-2067">PHOENIX-2067</a> and <a class="externalLink" href="https://issues.apache.org/jira/browse/PHOENIX-2120">PHOENIX-2120</a> cause rows to not be ordered correctly for the following types of columns:</p> 
  <ul> 
   <li>VARCHAR DESC columns</li> 
   <li>DECIMAL DESC columns</li> 
   <li>ARRAY DESC columns</li> 
   <li>Nullable DESC columns which are indexed (impacts the index, but not the data table)</li> 
   <li>BINARY columns included in the primary key constraint</li> 
  </ul> 
  <p>To get an idea if any of your tables are impacted, you may run the following command:</p> 
  <div class="source"> 
   <pre>./psql.py -u my_host_name
</pre> 
  </div> 
  <p>This will look through all tables you’ve defined and indicate if any upgrades are necessary. Ensure your client-side <tt>phoenix.query.timeoutMs</tt> property and server-side <tt>hbase.regionserver.lease.period</tt> are set high enough for the command to complete.</p> 
  <p>To upgrade the tables, run the same command, but list the tables you’d like upgraded like this:</p> 
  <div class="source"> 
   <pre>./psql.py -u my_host_name table1 table2 table3
</pre> 
  </div> 
  <p>This will first make a snapshot of your table and then upgrade it. If any problems occur during the upgrade process, the snapshot of your original table will be restored. Again, make sure your timeouts are set high enough, as the tables being upgraded need to be rewritten in order to fix them.</p> 
  <p>For the case of BINARY columns, no update is required if you’ve always provided all of the bytes making up that column value (i.e. you have not relied on Phoenix to auto-pad the column up to the fixed length). In this case, you should bypass the upgrade by running the following command:</p> 
  <div class="source"> 
   <pre>./psql.py -u -b my_host_name table1
</pre> 
  </div> 
  <p>This is important, because the PHOENIX-2120 was caused by BINARY columns being incorrectly padded with a space characters instead of a zero byte characters. The upgrade will replace trailing space characters with zero byte characters which may be invalid if the space characters are legitimate/intentional characters. Unfortunately, Phoenix has no way to know if this is the case.</p> 
  <p>Upgrading your tables is important, as without this, Phoenix will need to reorder rows it retrieves back from the server when otherwise not necessary. This will have a large negative impact on performance until the upgrade is performed.</p> 
  <p><b>Future releases of Phoenix may require that affected tables be upgraded prior to moving to the new release.</b></p> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">About</li>
						<li >
							<a href="index.html" title="Overview">Overview</a>
						</li>
						<li >
							<a href="who_is_using.html" title="Who is Using">Who is Using</a>
						</li>
						<li >
							<a href="recent.html" title="Recent Improvements">Recent Improvements</a>
						</li>
						<li >
							<a href="roadmap.html" title="Roadmap">Roadmap</a>
						</li>
						<li >
							<a href="news.html" title="News">News</a>
						</li>
						<li >
							<a href="performance.html" title="Performance">Performance</a>
						</li>
						<li >
							<a href="team.html" title="Team">Team</a>
						</li>
						<li >
							<a href="resources.html" title="Presentations">Presentations</a>
						</li>
						<li >
							<a href="mailing_list.html" title="Mailing Lists">Mailing Lists</a>
						</li>
						<li >
							<a href="source.html" title="Source Repository">Source Repository</a>
						</li>
						<li >
							<a href="issues.html" title="Issue Tracking">Issue Tracking</a>
						</li>
						<li >
							<a href="download.html" title="Download">Download</a>
						</li>
						<li >
							<a href="installation.html" title="Installation">Installation</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="contributing.html" title="How to Contribute">How to Contribute</a>
						</li>
						<li >
							<a href="develop.html" title="How to Develop">How to Develop</a>
						</li>
						<li >
							<a href="building_website.html" title="How to Update Website">How to Update Website</a>
						</li>
						<li >
							<a href="release.html" title="How to Release">How to Release</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="http://www.apache.org/licenses/" title="License" class="externalLink">License</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Using</li>
						<li >
							<a href="faq.html" title="F.A.Q.">F.A.Q.</a>
						</li>
						<li >
							<a href="Phoenix-in-15-minutes-or-less.html" title="Quick Start">Quick Start</a>
						</li>
						<li >
							<a href="building.html" title="Building">Building</a>
						</li>
						<li >
							<a href="tuning_guide.html" title="Tuning">Tuning</a>
						</li>
						<li >
							<a href="explainplan.html" title="Explain Plan">Explain Plan</a>
						</li>
						<li >
							<a href="tuning.html" title="Configuration">Configuration</a>
						</li>
						<li >
							<a href="upgrading.html" title="Backward Compatibility">Backward Compatibility</a>
						</li>
						<li class="active">
							<a href="#" title="Release Notes">Release Notes</a>
						</li>
						<li >
							<a href="pherf.html" title="Performance Testing">Performance Testing</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="phoenix_spark.html" title="Apache Spark Integration">Apache Spark Integration</a>
						</li>
						<li >
							<a href="hive_storage_handler.html" title="Phoenix Storage Handler for Apache Hive">Phoenix Storage Handler for Apache Hive</a>
						</li>
						<li >
							<a href="pig_integration.html" title="Apache Pig Integration">Apache Pig Integration</a>
						</li>
						<li >
							<a href="phoenix_mr.html" title="Map Reduce Integration">Map Reduce Integration</a>
						</li>
						<li >
							<a href="flume.html" title="Apache Flume Plugin">Apache Flume Plugin</a>
						</li>
						<li >
							<a href="kafka.html" title="Apache Kafka Plugin">Apache Kafka Plugin</a>
						</li>
						<li >
							<a href="python.html" title="Python Driver">Python Driver</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Features</li>
						<li >
							<a href="transactions.html" title="Transactions">Transactions</a>
						</li>
						<li >
							<a href="udf.html" title="User-defined Functions">User-defined Functions</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="secondary_indexing.html" title="Secondary Indexes">Secondary Indexes</a>
						</li>
						<li >
							<a href="columnencoding.html" title="Storage Formats">Storage Formats</a>
						</li>
						<li >
							<a href="atomic_upsert.html" title="Atomic Upsert">Atomic Upsert</a>
						</li>
						<li >
							<a href="namspace_mapping.html" title="Namespace Mapping">Namespace Mapping</a>
						</li>
						<li >
							<a href="update_statistics.html" title="Statistics Collection">Statistics Collection</a>
						</li>
						<li >
							<a href="rowtimestamp.html" title="Row Timestamp Column">Row Timestamp Column</a>
						</li>
						<li >
							<a href="paged.html" title="Paged Queries">Paged Queries</a>
						</li>
						<li >
							<a href="salted.html" title="Salted Tables">Salted Tables</a>
						</li>
						<li >
							<a href="skip_scan.html" title="Skip Scan">Skip Scan</a>
						</li>
						<li >
							<a href="tablesample.html" title="Table Sampling">Table Sampling</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="views.html" title="Views">Views</a>
						</li>
						<li >
							<a href="multi-tenancy.html" title="Multi tenancy">Multi tenancy</a>
						</li>
						<li >
							<a href="dynamic_columns.html" title="Dynamic Columns">Dynamic Columns</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="bulk_dataload.html" title="Bulk Loading">Bulk Loading</a>
						</li>
						<li >
							<a href="server.html" title="Query Server">Query Server</a>
						</li>
						<li >
							<a href="metrics.html" title="Metrics">Metrics</a>
						</li>
						<li >
							<a href="tracing.html" title="Tracing">Tracing</a>
						</li>
						<li >
							<a href="cursors.html" title="Cursor">Cursor</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Reference</li>
						<li >
							<a href="language/index.html" title="Grammar">Grammar</a>
						</li>
						<li >
							<a href="language/functions.html" title="Functions">Functions</a>
						</li>
						<li >
							<a href="language/datatypes.html" title="Datatypes">Datatypes</a>
						</li>
						<li >
							<a href="array_type.html" title="ARRAY type">ARRAY type</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="sequences.html" title="Sequences">Sequences</a>
						</li>
						<li >
							<a href="joins.html" title="Joins">Joins</a>
						</li>
						<li >
							<a href="subqueries.html" title="Subqueries">Subqueries</a>
						</li>
						<li >
							<a href="explainplan.html" title="Explain Plan">Explain Plan</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<form action="http://search-hadoop.com/?" method="get"><input value="Phoenix" name="fc_project" type="hidden"><input placeholder="Search Phoenix&hellip;" required="required" style="width:170px;" size="18" name="q" id="query" type="search"></form>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2018 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>
